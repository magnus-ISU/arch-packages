#!/bin/sh
# ~/.startdwm

# relaunch DWM if the binary changes, otherwise bail
# But I couldn't get it to work
#csum=""
#new_csum=$(sha1sum $(which dwm))
#while true
#do
#	if [ "$csum" != "$new_csum" ]
#	then
#		csum=$new_csum
#		dwm
#	else
#		exit 0
#	fi
#	new_csum=$(sha1sum $(which dwm))
#	sleep 0.5
#done


while true; do
	dwm 2>>~/.log/dwm/dwmerr
#	dwm 2>"~/.log/dwm/dwmerr-$(date +%y-%m-%d-%H-%M-%S)"
#	dwm > "~/.log/dwm/dwmout-$(date +%y-%m-%d-%H:%M:%S)" 2> "~/.log/dwm/dwmerr-$(date +%y-%m-%d-%H:%M:%S)"
#	mv ~/.log/dwm/dwmerr1 ~/.log/dwmerr
#	mv ~/.log/dwm/dwmout1 ~/.log/dwmout
done &

#set a random background - may want something more sophisticated later
xwallpaper --zoom $(find ~/media/wallpapers/ -type f | shuf | head -n 1)

#stop being a retard
shutdown 23:00

while true; do
	xsetroot -name "$(date | awk 'BEGIN {FS="[ :]"} {printf "%s %s %s %s:%s", $1, $2, $3, $4, $5}') $(uptime -p)"
	sleep 60
done
